<nav th:fragment="navbar" class="topbar">
    <a class="navbar-brand" th:href="@{/}">
        <img th:src="@{/images/logo-Photoroom.png}" height="30" alt="RentCar">
        RentCar
    </a>

    <div class="nav">
        <a th:href="@{/}">Home</a>
        <a th:href="@{/cars}">Cars</a>

        <!-- Show Login/Register if NOT authenticated -->
        <a th:if="${not #authorization.expr('isAuthenticated()')}" th:href="@{/auth/login}">Login</a>
        <a th:if="${not #authorization.expr('isAuthenticated()')}" th:href="@{/auth/register}">Register</a>

        <!-- Show Admin Dashboard ONLY for ADMIN role -->
        <a th:if="${#authorization.expr('hasRole(''ADMIN'')')}" th:href="@{/admin/dashboard}">Dashboard</a>

        <!-- Show username + Logout if authenticated -->
        <span th:if="${#authorization.expr('isAuthenticated()')}">
            Hello, <strong th:text="${#authentication.name}">User</strong> |
            <form th:action="@{/logout}" method="post" style="display:inline">
                <button type="submit" class="btn btn-link nav-link" 
                        style="display:inline; padding:0; border:none; background:none;">
                    Logout
                </button>
            </form>
        </span>

        <!-- Public dark mode toggle -->
        <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
    </div>
</nav>
