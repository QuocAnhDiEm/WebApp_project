<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Payment Method</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/booking.css}">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/theme.css}">
    <script th:src="@{/js/theme-toggle.js}" defer></script>
</head>
<body>
    <!-- ================= NAVBAR ================= -->
    <div th:replace="fragments/navbar :: navbar"></div>

    <div class="page">
        <a class="back-link" th:href="@{/cars}">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="margin-right:8px" aria-hidden="true">
                <path d="M15 18l-6-6 6-6" stroke="#14b44b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to Cars
        </a>

        <div class="card" role="main">
            <div class="card-head">
                <div class="icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M3 10h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8z" stroke="#16a34a" stroke-width="1.6"
                            stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 10V7a5 5 0 0 1 10 0v3" stroke="#16a34a" stroke-width="1.6" stroke-linecap="round"
                            stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2>Payment Method</h2>
            </div>

            <div class="summary">
                <div style="font-size:13px;color:#374151;font-weight:600;margin-bottom:8px">Booking Summary</div>
                <div class="summary-grid">
                    <div>
                        <div class="summary-row">
                            <div>
                                <div class="label">Car</div>
                                <div class="value" th:text="${booking.car.name}">Luxury Sports Car</div>
                            </div>
                            <div style="text-align:right">
                                <div class="label">Price/Day</div>
                                <div class="value price" th:text="'$' + ${booking.car.pricePerDay}">$150</div>
                            </div>
                        </div>

                        <div class="summary-row">
                            <div>
                                <div class="label">Customer</div>
                                <div class="value" th:text="${booking.firstName + ' ' + booking.lastName}">John Doe</div>
                            </div>
                            <div style="text-align:right">
                                <div class="label">Phone</div>
                                <div class="value" th:text="${booking.phone}">+1234567890</div>
                            </div>
                        </div>

                        <div class="summary-row" th:if="${booking.email}">
                            <div>
                                <div class="label">Email</div>
                                <div class="value" th:text="${booking.email}">email@example.com</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="summary-row">
                            <div>
                                <div class="label">Pick-up Date</div>
                                <div class="value" th:text="${#temporals.format(booking.pickUpDate, 'yyyy-MM-dd')}">2025-12-03</div>
                            </div>
                            <div style="text-align:right">
                                <div class="label">Drop-off Date</div>
                                <div class="value" th:text="${#temporals.format(booking.dropOffDate, 'yyyy-MM-dd')}">2025-12-05</div>
                            </div>
                        </div>

                        <div class="summary-row">
                            <div>
                                <div class="label">Pick-up Location</div>
                                <div class="value" th:text="${booking.pickUpLocation}">Location</div>
                            </div>
                            <div style="text-align:right">
                                <div class="label">Drop-off Location</div>
                                <div class="value" th:text="${booking.dropOffLocation}">Location</div>
                            </div>
                        </div>

                        <div class="summary-row" style="border-top: 2px solid #14b44b; padding-top: 12px; margin-top: 8px;">
                            <div>
                                <div class="label">Total Days</div>
                                <div class="value" th:text="${booking.totalDays ?: 'N/A'}">2</div>
                            </div>
                            <div style="text-align:right">
                                <div class="label">Total Price</div>
                                <div class="value price" style="font-size: 18px;" th:text="'$' + ${booking.totalPrice}">$300</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div th:if="${booking.notes}" style="margin-top: 12px; padding-top: 12px; border-top: 1px dashed rgba(0,0,0,0.06);">
                    <div class="label">Additional Notes</div>
                    <div class="value" style="margin-top: 4px;" th:text="${booking.notes}">Notes here</div>
                </div>
            </div>

            <div class="cash-panel" style="margin-bottom:8px">
                <div class="icon" aria-hidden="true">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                        <rect x="2" y="5" width="20" height="14" rx="2" stroke="#16a34a" stroke-width="1.6"/>
                        <path d="M9 12a3 3 0 1 0 6 0 3 3 0 0 0-6 0z" stroke="#16a34a" stroke-width="1.6"
                            stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div style="font-weight:700;margin-top:10px">Cash Payment</div>
                <p style="max-width:760px">You will pay in cash when you pick up the vehicle at our location. Please bring
                    the exact amount or we can provide change.</p>
            </div>

            <div class="info-block">
                <div style="font-weight:600;margin-bottom:8px">Important Information</div>
                <ul>
                    <li>Payment must be made in cash upon vehicle pick-up</li>
                    <li>Please bring a valid driver's license</li>
                    <li>A security deposit may be required</li>
                </ul>
            </div>

            <!-- Form to confirm booking -->
            <form th:action="@{/booking/confirm}" method="post">
                <input type="hidden" name="bookingId" th:value="${booking.id}" />
                <div class="actions">
                    <button type="submit" class="btn confirm">
                        Confirm Booking
                    </button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>